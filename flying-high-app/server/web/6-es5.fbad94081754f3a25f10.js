function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}(window.webpackJsonp=window.webpackJsonp||[]).push([[6],{zrcO:function(e,t,n){"use strict";n.r(t);var r,i=n("SVse"),s=n("iInd"),c=n("mrSG"),a=n("iELJ"),o=n("8Y7J"),u=n("SIfg"),l=n("IYfF"),f=n("b3ru"),b=((r=function(){function e(t,n,r,i){_classCallCheck(this,e),this.user=t,this.userService=n,this.authService=r,this.dialogRef=i}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"editUser",value:function(e){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=this.authService.getLoggedInUser().userId,t.next=3,this.userService.updateUser(n,e).toPromise();case 3:(r=t.sent)&&this.dialogRef.close(r);case 5:case"end":return t.stop()}}),t,this)})))}}]),e}()).\u0275fac=function(e){return new(e||r)(o.Rb(a.a),o.Rb(u.a),o.Rb(l.a),o.Rb(a.d))},r.\u0275cmp=o.Lb({type:r,selectors:[["app-edit-user-dialog"]],decls:3,vars:2,consts:[["mat-dialog-title",""],[3,"user","submitEvent"]],template:function(e,t){1&e&&(o.Xb(0,"h2",0),o.Fc(1),o.Wb(),o.Xb(2,"app-user-form",1),o.fc("submitEvent",(function(e){return t.editUser(e)})),o.Wb()),2&e&&(o.Db(1),o.Hc("Edit user ",t.user.email,""),o.Db(1),o.pc("user",t.user))},directives:[a.e,f.a],styles:[""]}),r),d=n("Dxy4");function h(e,t){if(1&e){var n=o.Yb();o.Xb(0,"div",1),o.Xb(1,"div",2),o.Xb(2,"div",3),o.Fc(3),o.Wb(),o.Xb(4,"div",4),o.Fc(5),o.Wb(),o.Xb(6,"div"),o.Fc(7),o.Wb(),o.Sb(8,"br"),o.Xb(9,"div",5),o.Xb(10,"div"),o.Fc(11,"User Level: "),o.Xb(12,"b"),o.Fc(13),o.kc(14,"uppercase"),o.Wb(),o.Wb(),o.Xb(15,"div"),o.Fc(16,"Earned Points: "),o.Xb(17,"b"),o.Fc(18),o.Wb(),o.Wb(),o.Wb(),o.Xb(19,"div"),o.Fc(20,"Seat Preference: "),o.Xb(21,"b"),o.Fc(22),o.kc(23,"uppercase"),o.Wb(),o.Wb(),o.Xb(24,"div"),o.Fc(25,"You have "),o.Xb(26,"b"),o.Fc(27),o.Wb(),o.Fc(28," the Newsletter subscription"),o.Wb(),o.Xb(29,"div",6),o.Xb(30,"button",7),o.fc("click",(function(){return o.wc(n),o.jc().openEditUserDialog()})),o.Fc(31,"Edit User Profile"),o.Wb(),o.Wb(),o.Wb(),o.Wb()}if(2&e){var r=o.jc();o.Db(3),o.Gc(r.user.email),o.Db(2),o.Jc("",r.user.title,": ",r.user.firstName," ",r.user.lastName,""),o.Db(2),o.Ic("",r.user.address,", ",r.user.country,""),o.Db(6),o.Gc(o.lc(14,10,r.user.userLevel)),o.Db(5),o.Gc(r.user.points),o.Db(4),o.Gc(o.lc(23,12,r.user.seatPreference)),o.Db(5),o.Gc(r.user.newsletterSub?"Booked":"Not Booked")}}var p,m=((p=function(){function e(t,n,r){_classCallCheck(this,e),this.userAccountService=t,this.authService=n,this.dialog=r}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.authService.getLoggedInUser().userId,e.next=3,this.userAccountService.getUser(t).toPromise();case 3:this.user=e.sent;case 4:case"end":return e.stop()}}),e,this)})))}},{key:"openEditUserDialog",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dialog.open(b,{data:this.user}).afterClosed().toPromise();case 2:(t=e.sent)&&(this.user=t,this.authService.getLoggedInUser$.next({email:this.user.email,userId:this.user.userId}),this.authService.setAuthUserInStorage({email:this.user.email,userId:this.user.userId}));case 4:case"end":return e.stop()}}),e,this)})))}}]),e}()).\u0275fac=function(e){return new(e||p)(o.Rb(u.a),o.Rb(l.a),o.Rb(a.b))},p.\u0275cmp=o.Lb({type:p,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"card"],[1,"name"],[1,"fullname"],[1,"level"],[1,"button-container"],["mat-raised-button","",3,"click"]],template:function(e,t){1&e&&o.Dc(0,h,32,14,"div",0),2&e&&o.pc("ngIf",t.user)},directives:[i.l,d.a],pipes:[i.t],styles:[".profile-container[_ngcontent-%COMP%]{width:40vw;margin:10px auto}.profile-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{line-height:30px}.profile-container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:x-large}.profile-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:medium}.profile-container[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.profile-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),p),v=n("OaSA");function g(e,t){1&e&&(o.Xb(0,"th",13),o.Fc(1," Date "),o.Wb())}function C(e,t){if(1&e&&(o.Xb(0,"td",14),o.Fc(1),o.kc(2,"date"),o.Wb()),2&e){var n=t.$implicit;o.Db(1),o.Hc(" ",o.mc(2,1,n.flightInfo.date,"yyyy-MM-dd, h:mm a")," ")}}function D(e,t){1&e&&(o.Xb(0,"th",13),o.Fc(1," Departure "),o.Wb())}function P(e,t){if(1&e&&(o.Xb(0,"td",14),o.Fc(1),o.Wb()),2&e){var n=t.$implicit;o.Db(1),o.Hc(" ",n.flightInfo.departure," ")}}function w(e,t){1&e&&(o.Xb(0,"th",13),o.Fc(1," Destination "),o.Wb())}function y(e,t){if(1&e&&(o.Xb(0,"td",14),o.Fc(1),o.Wb()),2&e){var n=t.$implicit;o.Db(1),o.Hc(" ",n.flightInfo.destination," ")}}function I(e,t){1&e&&(o.Xb(0,"th",13),o.Fc(1," Points Earned "),o.Wb())}function k(e,t){if(1&e&&(o.Xb(0,"td",14),o.Fc(1),o.Wb()),2&e){var n=t.$implicit;o.Db(1),o.Hc(" ",n.flightInfo.point," ")}}function S(e,t){1&e&&o.Sb(0,"tr",15)}function U(e,t){1&e&&o.Sb(0,"tr",16)}function W(e,t){if(1&e&&(o.Xb(0,"table",4),o.Vb(1,5),o.Dc(2,g,2,0,"th",6),o.Dc(3,C,3,4,"td",7),o.Ub(),o.Vb(4,8),o.Dc(5,D,2,0,"th",6),o.Dc(6,P,2,1,"td",7),o.Ub(),o.Vb(7,9),o.Dc(8,w,2,0,"th",6),o.Dc(9,y,2,1,"td",7),o.Ub(),o.Vb(10,10),o.Dc(11,I,2,0,"th",6),o.Dc(12,k,2,1,"td",7),o.Ub(),o.Dc(13,S,1,0,"tr",11),o.Dc(14,U,1,0,"tr",12),o.Wb()),2&e){var n=o.jc();o.pc("dataSource",n.usersAccount),o.Db(13),o.pc("matHeaderRowDef",n.displayedColumns),o.Db(1),o.pc("matRowDefColumns",n.displayedColumns)}}var X,O,R=[{path:"",component:(X=function(){function e(t,n,r,i){_classCallCheck(this,e),this.userAccountService=t,this.authService=n,this.dialog=r,this.router=i,this.usersAccount=[],this.displayedColumns=["date","departure","destination","pointsEarned"]}return _createClass(e,[{key:"ngOnInit",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t,n,r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=this.authService.getLoggedInUser().email,n=this.authService.getLoggedInUser().userId,e.next=3,this.userAccountService.getUser(n).toPromise();case 3:return this.user=e.sent,this.userLevel=this.user.userLevel,e.next=7,this.userAccountService.getUserAccount(t).toPromise();case 7:r=e.sent,this.usersAccount=r.userAccount,this.totalPoints=r.totalPoints;case 9:case"end":return e.stop()}}),e,this)})))}},{key:"openUserModal",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.dialog.open(b,{data:this.user}).afterClosed().toPromise();case 2:(t=e.sent)&&(this.user=t,this.authService.getLoggedInUser$.next({email:this.user.email,userId:this.user.userId}),this.authService.setAuthUserInStorage({email:this.user.email,userId:this.user.userId}));case 4:case"end":return e.stop()}}),e,this)})))}},{key:"toUserProfile",value:function(){this.router.navigateByUrl("users/profile")}}]),e}(),X.\u0275fac=function(e){return new(e||X)(o.Rb(u.a),o.Rb(l.a),o.Rb(a.b),o.Rb(s.a))},X.\u0275cmp=o.Lb({type:X,selectors:[["app-users"]],decls:8,vars:5,consts:[[1,"user-info-container"],["mat-raised-button","",3,"click"],["mat-button","","color","primary",3,"click"],["mat-table","",3,"dataSource",4,"ngIf"],["mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","departure"],["matColumnDef","destination"],["matColumnDef","pointsEarned"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(o.Xb(0,"div",0),o.Fc(1),o.kc(2,"uppercase"),o.Xb(3,"button",1),o.fc("click",(function(){return t.openUserModal()})),o.Fc(4,"Edit User Profile"),o.Wb(),o.Xb(5,"button",2),o.fc("click",(function(){return t.toUserProfile()})),o.Fc(6,"To User Profile"),o.Wb(),o.Wb(),o.Dc(7,W,15,3,"table",3)),2&e&&(o.Db(1),o.Ic("Point Balance: ",t.totalPoints," \xa0\xa0 User Level: ",o.lc(2,3,t.userLevel)," "),o.Db(6),o.pc("ngIf",0!==t.totalPoints))},directives:[d.a,i.l,v.j,v.c,v.e,v.b,v.g,v.i,v.d,v.a,v.f,v.h],pipes:[i.t,i.e],styles:[".user-info-container[_ngcontent-%COMP%]{margin:10px auto;width:80%;font-size:large}.user-info-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}table[_ngcontent-%COMP%]{margin:0 auto;width:80%}"]}),X)},{path:"profile",component:m}],_=((O=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:O}),O.\u0275inj=o.Ob({factory:function(e){return new(e||O)},imports:[[s.d.forChild(R)],s.d]}),O),F=n("tfCk"),x=n("PCNd");n.d(t,"UsersModule",(function(){return L}));var M,L=((M=function e(){_classCallCheck(this,e)}).\u0275mod=o.Pb({type:M}),M.\u0275inj=o.Ob({factory:function(e){return new(e||M)},imports:[[i.c,_,F.a,x.a]]}),M)}}]);