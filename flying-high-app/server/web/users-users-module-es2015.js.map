{"version":3,"sources":["./src/app/users/edit-user-dialog/edit-user-dialog.component.ts","./src/app/users/edit-user-dialog/edit-user-dialog.component.html","./src/app/users/profile/profile.component.ts","./src/app/users/profile/profile.component.html","./src/app/users/users-routing.module.ts","./src/app/users/users.component.ts","./src/app/users/users.component.html","./src/app/users/users.module.ts"],"names":[],"mappings":"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","file":"users-users-module-es2015.js","sourcesContent":["import { Component, Inject, OnInit } from '@angular/core';\nimport { MatDialog, MatDialogRef, MAT_DIALOG_DATA } from '@angular/material/dialog';\nimport { AuthService } from 'src/app/shared/services/auth.service';\nimport { UsersAccountService } from 'src/app/shared/services/users-account.service';\nimport { User, UserDto } from '../user.interface';\n\n@Component({\n  selector: 'app-edit-user-dialog',\n  templateUrl: './edit-user-dialog.component.html',\n  styleUrls: ['./edit-user-dialog.component.scss']\n})\nexport class EditUserDialogComponent implements OnInit {\n\n  constructor(\n    @Inject(MAT_DIALOG_DATA) public user: User,\n    private userService: UsersAccountService,\n    private authService: AuthService,\n    private dialogRef: MatDialogRef<EditUserDialogComponent>\n  ) { }\n\n  ngOnInit(): void {\n  }\n\n  async editUser(user: UserDto) {\n    const userId = this.authService.getLoggedInUser().userId;\n    const updatedUser = await this.userService.updateUser(userId, user).toPromise();\n    if (updatedUser) {\n      this.dialogRef.close(updatedUser);\n    }\n  }\n\n}\n","<h2 mat-dialog-title>Edit user {{user.email}}</h2>\n<app-user-form [user]=\"user\" (submitEvent)=\"editUser($event)\"></app-user-form>","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { AuthService } from 'src/app/shared/services/auth.service';\nimport { UsersAccountService } from 'src/app/shared/services/users-account.service';\nimport { EditUserDialogComponent } from '../edit-user-dialog/edit-user-dialog.component';\nimport { User } from '../user.interface';\n\n@Component({\n  selector: 'app-profile',\n  templateUrl: './profile.component.html',\n  styleUrls: ['./profile.component.scss']\n})\nexport class ProfileComponent implements OnInit {\n\n  user: User;\n\n  constructor(\n    private userAccountService: UsersAccountService,\n    private authService: AuthService,\n    private dialog: MatDialog\n  ) { }\n\n  async ngOnInit() {\n    const authUserId = this.authService.getLoggedInUser().userId;\n    this.user = await this.userAccountService.getUser(authUserId).toPromise();\n  }\n\n  async openEditUserDialog() {\n    const res = await this.dialog.open(EditUserDialogComponent, {\n      data: this.user\n    }).afterClosed().toPromise();\n    if (res) {\n      this.user = res;\n      this.authService.getLoggedInUser$.next({ email: this.user.email, userId: this.user.userId });\n      this.authService.setAuthUserInStorage({ email: this.user.email, userId: this.user.userId });\n    }\n  }\n\n}\n","<div class=\"profile-container\" *ngIf=\"user\">\n    <div class=\"card\">\n            <div class=\"name\">{{user.email}}</div>\n            <div class=\"fullname\">{{user.title}}: {{user.firstName}} {{user.lastName}}</div>\n            <div>{{user.address}}, {{user.country}}</div>\n            <br>\n            <div class=\"level\">\n                <div>User Level: <b>{{user.userLevel | uppercase}}</b></div>\n                <div>Earned Points: <b>{{user.points}}</b></div>\n            </div>\n            <div>Seat Preference: <b>{{user.seatPreference | uppercase}}</b></div>\n            <div>You have <b>{{ user.newsletterSub ? 'Booked' : 'Not Booked' }}</b> the Newsletter subscription</div>\n            <div class=\"button-container\">\n                <button mat-raised-button (click)=\"openEditUserDialog()\">Edit User Profile</button>\n            </div>\n    </div>\n</div>","import { NgModule } from '@angular/core';\nimport { Routes, RouterModule } from '@angular/router';\nimport { ProfileComponent } from './profile/profile.component';\nimport { UsersComponent } from './users.component';\n\n\nconst routes: Routes = [\n  { path: '', component: UsersComponent },\n  { path: 'profile', component: ProfileComponent }\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule]\n})\nexport class UsersRoutingModule { }\n","import { Component, OnInit } from '@angular/core';\nimport { MatDialog } from '@angular/material/dialog';\nimport { Router } from '@angular/router';\nimport { USER_LEVEL } from '../shared/enums/user.enum';\nimport { AuthService } from '../shared/services/auth.service';\nimport { UsersAccountService } from '../shared/services/users-account.service';\nimport { EditUserDialogComponent } from './edit-user-dialog/edit-user-dialog.component';\nimport { User } from './user.interface';\nimport { UsersAccount } from './users-account.interface';\n\n@Component({\n  selector: 'app-users',\n  templateUrl: './users.component.html',\n  styleUrls: ['./users.component.scss']\n})\nexport class UsersComponent implements OnInit {\n\n  usersAccount: UsersAccount[] = [];\n  userLevel: USER_LEVEL;\n  totalPoints: number;\n  displayedColumns: string[] = ['date', 'departure', 'destination', 'pointsEarned'];\n  user: User;\n\n  constructor(\n    private userAccountService: UsersAccountService,\n    private authService: AuthService,\n    private dialog: MatDialog,\n    private router: Router\n  ) { }\n\n  async ngOnInit() {\n    const email = this.authService.getLoggedInUser().email;\n    const authUserId = this.authService.getLoggedInUser().userId;\n    this.user = await this.userAccountService.getUser(authUserId).toPromise();\n    this.userLevel = this.user.userLevel;\n    const res = await this.userAccountService.getUserAccount(email).toPromise();\n    this.usersAccount = res.userAccount;\n    this.totalPoints = res.totalPoints;\n  }\n\n  async openUserModal() {\n    const res = await this.dialog.open(EditUserDialogComponent, {\n      data: this.user\n    }).afterClosed().toPromise();\n    if (res) {\n      this.user = res;\n      this.authService.getLoggedInUser$.next({ email: this.user.email, userId: this.user.userId });\n      this.authService.setAuthUserInStorage({ email: this.user.email, userId: this.user.userId});\n    }\n  }\n\n  toUserProfile() {\n    this.router.navigateByUrl('users/profile')\n  }\n\n}\n","<div class=\"user-info-container\">\n    Point Balance: <span test-dataid=\"point-balance\">{{totalPoints}}</span> &nbsp;&nbsp; \n    Status Level: <span test-dataid=\"status-level\">{{userLevel | uppercase}}</span>\n    <button mat-raised-button (click)=\"openUserModal()\">Edit User Profile</button>\n    <button mat-button color=\"primary\" (click)=\"toUserProfile()\">To User Profile</button>\n</div>\n<table mat-table [dataSource]=\"usersAccount\" *ngIf=\"totalPoints !== 0\">\n    <ng-container matColumnDef=\"date\">\n        <th mat-header-cell *matHeaderCellDef> Date </th>\n        <td mat-cell *matCellDef=\"let element\"> {{element.flightInfo.date | date: 'yyyy-MM-dd, h:mm a'}} </td>\n    </ng-container>\n    <ng-container matColumnDef=\"departure\">\n        <th mat-header-cell *matHeaderCellDef> Departure </th>\n        <td mat-cell *matCellDef=\"let element\"> {{element.flightInfo.departure}} </td>\n    </ng-container>\n    <ng-container matColumnDef=\"destination\">\n        <th mat-header-cell *matHeaderCellDef> Destination </th>\n        <td mat-cell *matCellDef=\"let element\"> {{element.flightInfo.destination}} </td>\n    </ng-container>\n    <ng-container matColumnDef=\"pointsEarned\">\n        <th mat-header-cell *matHeaderCellDef> Points Earned </th>\n        <td mat-cell *matCellDef=\"let element\"> {{element.flightInfo.point}} </td>\n    </ng-container>\n    <tr mat-header-row *matHeaderRowDef=\"displayedColumns\"></tr>\n    <tr mat-row *matRowDef=\"let row; columns: displayedColumns;\"></tr>\n</table>","import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { UsersComponent } from './users.component';\nimport { UsersRoutingModule } from './users-routing.module';\nimport { MaterialModules } from '../shared/material-modules';\nimport { EditUserDialogComponent } from './edit-user-dialog/edit-user-dialog.component';\nimport { SharedModule } from '../shared/shared.module';\nimport { ProfileComponent } from './profile/profile.component';\n\n@NgModule({\n  declarations: [UsersComponent, EditUserDialogComponent, ProfileComponent],\n  imports: [\n    CommonModule,\n    UsersRoutingModule,\n    MaterialModules,\n    SharedModule\n  ]\n})\nexport class UsersModule { }\n"],"sourceRoot":"webpack:///"}