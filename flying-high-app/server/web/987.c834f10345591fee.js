"use strict";(self.webpackChunkweb=self.webpackChunkweb||[]).push([[987],{3987:(w,h,r)=>{r.r(h),r.d(h,{UsersModule:()=>E});var a=r(9808),m=r(5675),l=r(655),c=r(8966),e=r(5e3),p=r(1267),f=r(629),_=r(6210);let g=(()=>{class t{constructor(n,s,i,d){this.user=n,this.userService=s,this.authService=i,this.dialogRef=d}ngOnInit(){}editUser(n){return(0,l.mG)(this,void 0,void 0,function*(){const s=this.authService.getLoggedInUser().userId,i=yield this.userService.updateUser(s,n).toPromise();i&&this.dialogRef.close(i)})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(c.WI),e.Y36(p.G),e.Y36(f.e),e.Y36(c.so))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-edit-user-dialog"]],decls:3,vars:2,consts:[["mat-dialog-title",""],[3,"user","submitEvent"]],template:function(n,s){1&n&&(e.TgZ(0,"h2",0),e._uU(1),e.qZA(),e.TgZ(2,"app-user-form",1),e.NdJ("submitEvent",function(d){return s.editUser(d)}),e.qZA()),2&n&&(e.xp6(1),e.hij("Edit user ",s.user.email,""),e.xp6(1),e.Q6J("user",s.user))},directives:[c.uh,_.m],styles:[""]}),t})();var U=r(7423);function v(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"div",1)(1,"div",2)(2,"div",3),e._uU(3),e.qZA(),e.TgZ(4,"div",4),e._uU(5),e.qZA(),e.TgZ(6,"div"),e._uU(7),e.qZA(),e._UZ(8,"br"),e.TgZ(9,"div",5)(10,"div"),e._uU(11,"User Level: "),e.TgZ(12,"b"),e._uU(13),e.ALo(14,"uppercase"),e.qZA()(),e.TgZ(15,"div"),e._uU(16,"Earned Points: "),e.TgZ(17,"b"),e._uU(18),e.qZA()()(),e.TgZ(19,"div"),e._uU(20,"Seat Preference: "),e.TgZ(21,"b"),e._uU(22),e.ALo(23,"uppercase"),e.qZA()(),e.TgZ(24,"div"),e._uU(25,"You have "),e.TgZ(26,"b"),e._uU(27),e.qZA(),e._uU(28," the Newsletter subscription"),e.qZA(),e.TgZ(29,"div",6)(30,"button",7),e.NdJ("click",function(){return e.CHM(n),e.oxw().openEditUserDialog()}),e._uU(31,"Edit User Profile"),e.qZA()()()()}if(2&t){const n=e.oxw();e.xp6(3),e.Oqu(n.user.email),e.xp6(2),e.lnq("",n.user.title,": ",n.user.firstName," ",n.user.lastName,""),e.xp6(2),e.AsE("",n.user.address,", ",n.user.country,""),e.xp6(6),e.Oqu(e.lcZ(14,10,n.user.userLevel)),e.xp6(5),e.Oqu(n.user.points),e.xp6(4),e.Oqu(e.lcZ(23,12,n.user.seatPreference)),e.xp6(5),e.Oqu(n.user.newsletterSub?"Booked":"Not Booked")}}let C=(()=>{class t{constructor(n,s,i){this.userAccountService=n,this.authService=s,this.dialog=i}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){const n=this.authService.getLoggedInUser().userId;this.user=yield this.userAccountService.getUser(n).toPromise()})}openEditUserDialog(){return(0,l.mG)(this,void 0,void 0,function*(){const n=yield this.dialog.open(g,{data:this.user}).afterClosed().toPromise();n&&(this.user=n,this.authService.getLoggedInUser$.next({email:this.user.email,userId:this.user.userId}),this.authService.setAuthUserInStorage({email:this.user.email,userId:this.user.userId}))})}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.G),e.Y36(f.e),e.Y36(c.uw))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-profile"]],decls:1,vars:1,consts:[["class","profile-container",4,"ngIf"],[1,"profile-container"],[1,"card"],[1,"name"],[1,"fullname"],[1,"level"],[1,"button-container"],["mat-raised-button","",3,"click"]],template:function(n,s){1&n&&e.YNc(0,v,32,14,"div",0),2&n&&e.Q6J("ngIf",s.user)},directives:[a.O5,U.lW],pipes:[a.gd],styles:[".profile-container[_ngcontent-%COMP%]{width:40vw;margin:10px auto}.profile-container[_ngcontent-%COMP%]   div[_ngcontent-%COMP%]{line-height:30px}.profile-container[_ngcontent-%COMP%]   .name[_ngcontent-%COMP%]{font-size:x-large}.profile-container[_ngcontent-%COMP%]   .fullname[_ngcontent-%COMP%]{font-size:medium}.profile-container[_ngcontent-%COMP%]   .level[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.profile-container[_ngcontent-%COMP%]   .button-container[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}"]}),t})();var u=r(8279);function Z(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Date "),e.qZA())}function T(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.ALo(2,"date"),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",e.xi3(2,1,n.flightInfo.date,"yyyy-MM-dd, h:mm a")," ")}}function A(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Departure "),e.qZA())}function P(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.flightInfo.departure," ")}}function x(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Destination "),e.qZA())}function y(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.flightInfo.destination," ")}}function b(t,o){1&t&&(e.TgZ(0,"th",15),e._uU(1," Points Earned "),e.qZA())}function I(t,o){if(1&t&&(e.TgZ(0,"td",16),e._uU(1),e.qZA()),2&t){const n=o.$implicit;e.xp6(1),e.hij(" ",n.flightInfo.point," ")}}function O(t,o){1&t&&e._UZ(0,"tr",17)}function S(t,o){1&t&&e._UZ(0,"tr",18)}function M(t,o){if(1&t&&(e.TgZ(0,"table",6),e.ynx(1,7),e.YNc(2,Z,2,0,"th",8),e.YNc(3,T,3,4,"td",9),e.BQk(),e.ynx(4,10),e.YNc(5,A,2,0,"th",8),e.YNc(6,P,2,1,"td",9),e.BQk(),e.ynx(7,11),e.YNc(8,x,2,0,"th",8),e.YNc(9,y,2,1,"td",9),e.BQk(),e.ynx(10,12),e.YNc(11,b,2,0,"th",8),e.YNc(12,I,2,1,"td",9),e.BQk(),e.YNc(13,O,1,0,"tr",13),e.YNc(14,S,1,0,"tr",14),e.qZA()),2&t){const n=e.oxw();e.Q6J("dataSource",n.usersAccount),e.xp6(13),e.Q6J("matHeaderRowDef",n.displayedColumns),e.xp6(1),e.Q6J("matRowDefColumns",n.displayedColumns)}}const Y=[{path:"",component:(()=>{class t{constructor(n,s,i,d){this.userAccountService=n,this.authService=s,this.dialog=i,this.router=d,this.usersAccount=[],this.displayedColumns=["date","departure","destination","pointsEarned"]}ngOnInit(){return(0,l.mG)(this,void 0,void 0,function*(){const n=this.authService.getLoggedInUser().email,s=this.authService.getLoggedInUser().userId;this.user=yield this.userAccountService.getUser(s).toPromise(),this.userLevel=this.user.userLevel;const i=yield this.userAccountService.getUserAccount(n).toPromise();this.usersAccount=i.userAccount,this.totalPoints=i.totalPoints})}openUserModal(){return(0,l.mG)(this,void 0,void 0,function*(){const n=yield this.dialog.open(g,{data:this.user}).afterClosed().toPromise();n&&(this.user=n,this.authService.getLoggedInUser$.next({email:this.user.email,userId:this.user.userId}),this.authService.setAuthUserInStorage({email:this.user.email,userId:this.user.userId}))})}toUserProfile(){this.router.navigateByUrl("users/profile")}}return t.\u0275fac=function(n){return new(n||t)(e.Y36(p.G),e.Y36(f.e),e.Y36(c.uw),e.Y36(m.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-users"]],decls:13,vars:5,consts:[[1,"user-info-container"],["test-dataid","point-balance"],["test-dataid","status-level"],["mat-raised-button","",3,"click"],["mat-button","","color","primary",3,"click"],["id","flight-history","mat-table","",3,"dataSource",4,"ngIf"],["id","flight-history","mat-table","",3,"dataSource"],["matColumnDef","date"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","departure"],["matColumnDef","destination"],["matColumnDef","pointsEarned"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-header-row",""],["mat-row",""]],template:function(n,s){1&n&&(e.TgZ(0,"div",0),e._uU(1," Point Balance: "),e.TgZ(2,"span",1),e._uU(3),e.qZA(),e._uU(4," \xa0\xa0 Status Level: "),e.TgZ(5,"span",2),e._uU(6),e.ALo(7,"uppercase"),e.qZA(),e.TgZ(8,"button",3),e.NdJ("click",function(){return s.openUserModal()}),e._uU(9,"Edit User Profile"),e.qZA(),e.TgZ(10,"button",4),e.NdJ("click",function(){return s.toUserProfile()}),e._uU(11,"To User Profile"),e.qZA()(),e.YNc(12,M,15,3,"table",5)),2&n&&(e.xp6(3),e.Oqu(s.totalPoints),e.xp6(3),e.Oqu(e.lcZ(7,3,s.userLevel)),e.xp6(6),e.Q6J("ngIf",0!==s.totalPoints))},directives:[U.lW,a.O5,u.BZ,u.w1,u.fO,u.ge,u.Dz,u.ev,u.as,u.XQ,u.nj,u.Gk],pipes:[a.gd,a.uU],styles:[".user-info-container[_ngcontent-%COMP%]{margin:10px auto;width:80%;font-size:large}.user-info-container[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{float:right}table[_ngcontent-%COMP%]{margin:0 auto;width:80%}"]}),t})()},{path:"profile",component:C}];let D=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[m.Bz.forChild(Y)],m.Bz]}),t})();var N=r(1454),q=r(4466);let E=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.ez,D,N.U,q.m]]}),t})()}}]);